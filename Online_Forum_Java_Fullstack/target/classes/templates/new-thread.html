   <!DOCTYPE html>
   <html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
   <head>
       <title>Create New Thread - Forum App</title>
       <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
   </head>
   <body>
       <nav class="navbar navbar-expand-lg navbar-light bg-light">
           <div class="container-fluid">
               <a class="navbar-brand" href="/">Forum App</a>
               <div class="navbar-nav ms-auto">
                   <a class="nav-link" href="/thread">Threads</a>  <!-- No /api -->
                   <a class="nav-link" href="/logout" sec:authorize="isAuthenticated()">Logout</a>
               </div>
           </div>
       </nav>

       <div class="container mt-5">
           <h1 th:text="${message}">Create New Thread</h1>
           
           <!-- Validation Errors (if any, e.g., on re-render) -->
           <div th:if="${#fields.hasGlobalErrors()}" class="alert alert-danger">
               <ul th:each="err : ${#fields.allGlobalErrors()}" class="mb-0">
                   <li th:text="${err}">Error</li>
               </ul>
           </div>
           
           <!-- Form Binding Errors (field-specific) -->
           <div th:if="${#fields.hasAnyErrors()}" class="alert alert-danger">
               <ul>
                   <li th:each="err : ${#fields.allErrors()}" th:text="${err}"></li>
               </ul>
           </div>

           <form th:action="@{/thread/new}" th:object="${thread}" method="post" class="needs-validation" novalidate>
               <div class="mb-3">
                   <label for="title" class="form-label">Title</label>
                   <input type="text" th:field="*{title}" id="title" class="form-control" placeholder="Enter thread title" required>
                   <div th:if="${#fields.hasErrors('title')}" th:errors="*{title}" class="text-danger"></div>
               </div>
               
               <div class="mb-3">
                   <label for="content" class="form-label">Content</label>
                   <textarea th:field="*{content}" id="content" class="form-control" rows="5" placeholder="Write your thread content..." required></textarea>
                   <div th:if="${#fields.hasErrors('content')}" th:errors="*{content}" class="text-danger"></div>
               </div>
               
               <div class="mb-3">
                   <label for="category" class="form-label">Category</label>
                   <select th:field="*{category.id}" id="category" class="form-select" required>
                       <option value="">Select a category</option>
                       <option th:each="cat : ${categories}" 
                               th:value="${cat.id}" 
                               th:text="${cat.name}">Category</option>
                   </select>
                   <div th:if="${#fields.hasErrors('category')}" th:errors="*{category}" class="text-danger"></div>
                   <div th:if="${categories.isEmpty()}" class="text-warning">No categories available.</div>
               </div>
               
               <button type="submit" class="btn btn-primary">Create Thread</button>
               <a th:href="@{/thread}" class="btn btn-secondary">Cancel</a>
           </form>
           
           <p class="mt-3">Logged in as: <span th:text="${currentUser }">User </span></p>
       </div>

       <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
   </body>
   </html>
   